Current Work
============

Next
====

CostumeTab : Copy button

Create CostumeGroupTab, where we can rename a group, and quickly add more costumes to it.
	Using a "MultipleChoiceParameter" - to be created in paratask!
	Also, allow a group to be hidden from the CostumePicker

Right click the ResourcesTree for popup menu :
	Delete, Rename, New

Costumes to override "default" as the first pose.
	i.e. a "firstEvent" field, which defaults to "default".

Use thumbnails of Costume's editor pose in the Resources tree
	Ditto for Pose

Costumes "Based On" another costume.

Create groups of Poses? Similar to the groups of Costumes???
	Hmm, Could just use the texture as the grouping.
	Anyway, we need a PoseChoiceParameter, which is a MenuButton with a hierarchical menu.

BUGS
====

Renaming a costume doesn't update ActorResource in scenes that use it.

findActorAt doesn't work for rotated text that is not bottom? left aligned (as the offset isn't taken into account when doing the rotation maths).

Attributes now depends on paratask-core, and therefore a running game also depends upon it. Grr.
	I only want the EDITOR to depend on paratask-core.
	Have a factory method for Attributes, which checks Class.forName( "uk...paratask...Parameter" )
		It either returns Attributes (which has no parameter stuff) of DesignAttributes
		Then cast wherever they are used in the editor.
		Add an extension function : SceneActor.designAttributes() which does the cast. Ditto for Costume

InputPicker :
	Java FX key code name "Number Sign" does not map to anything in enum class Key
	"Windows" is this meta?
	Shift, Control, alt etc don't work either.

New Features
============

Allow fonts to have multiple outlines i.e. one myfont.png may have myfont-thinOutline.png and myfont.blurredOutline.png
	Could specify an outline name in TextStyle, and lazily load the extra texture.

TextStyle to have an extraSpacing property which causes letters to be moved further appart
	Ditto for extra line height.

	

Add some "solid" objects, and use overlap detection to kill the sparks.
	Just as a prelude to pixel collision detection.

Pixel Overlap
	Find the intersection of their world rectangles
	Onto an additional buffer A
	Can we render the first using just the alpha channel (ignore RGB)
	and then multiply by the 2nd's alpha channel

	Non ovelapping would then be close to 0
	So that we don't have to copy large data arrays...
		Render the four quarters of A onto B (regular rendering)
		If any pixels are not near zero, we have overlap (but in 1/4 the number of pixels).
		Repeat this operation (this time each quarter of B onto C) and keep going, till we have just one pixel.
		Now read the entire pixel buffer (of one pixel!!!)
	http://wiki.lwjgl.org/wiki/Render_to_Texture_with_Frame_Buffer_Objects_(FBO).html


If we only care about IF we've hit something, rather than who,
	draw all objects we wish to test against in grey using logical OR
	then draw my mask ADDING it
	Any pixels that are lighter than grey are collisions. As this is just the highest bit,
	we could OR the whole buffer!
	
So a "quick" game would look like :
	Bullet.ifHit( any deadly ) kill me later
	Player.ifHit( any deadly ) kill me later

But when we want know know who's hit who :
	Player.ifHit( any solids ) kill me
	Player.listHits( any deadly ) ...

	Buller.isHit( any solids ) kill me
	(don't need to test for hitting player)

The renderer can be reused. Center the "view" on the player, and rotate the view, so that the player is NOT rotated
	i.e. has a normal rectangular shape.

https://www.khronos.org/opengl/wiki/Pixel_Transfer
https://www.khronos.org/opengl/wiki/Fragment_Shader
https://www.khronos.org/opengl/wiki/Logical_Operation


Allow a Layout to specify a (set of?) scene paths to merge whenever a scene using this layout is started
	This allows standard stages to be included (such as a "glass" stage, showing score, "pause" etc)
	(i.e. when starting to PLAY the scene, not when designing it).
	Hmm, Maybe it SHOULD be loaded when designing too (but is never editable)
Also allow a SceneResource to specify a (set of?) scene paths to be merged.
	This will allow a "background" scene to be chosen per actual scene.


Pose : Allow a "mirrored" version (X,Y or Both)
	Just make the rectangle have -ve widths/heights???
	Use this to implement "Bee" without the special transformation
Costume to have an "initial" event name (which is normally "default").
	But Bee's will be "right" (and Bee will not have a "default" event).
	Each SceneActor can then override this.


Editor
	Allow a texture to be reloaded (Texture and ImageCache).
	
	Prevent deletion of textures used by a pose
	Prevent deletion of poses used by a costume

	Pose tab to have a list of costumes using it
		In a "minor tab"?
		Or just a button which opens all costumes using that pose.

When renaming an item, who's name is used in a scene, we need to keep track of renamed items,
	and update all scenes when the resource file is saved.
	Costume and Font only?

PoseTab should show the whole Texture, with a single shaded rectangle to show the position.
	Double click to auto adjust the pose's rectangle and offset.
	Make it a resuable copmonent, which can show one or many shaded rectangles.


Mouse
	Find Actors at a point
		Overlapping, or using pixel data

Ensure Textures are deleted when removed from resources (Use finalise?).

Add my own "runLater", which will call the code at the end of a tick.
	I could use this to delete textures (i.e. put the runLater call in Texture.finalize).

Costumes to inherit?
	Just the events?



Later
=====

Game based on "flocking" :	https://www.youtube.com/watch?v=M028vafB0l8

Undo/Redo in scene editor

JBox2d integration
	Stickflick style jointed characters.

Split the project into multiple modules
	core
	demo
	editor

Load pose meta-data from SVG files.
	Any objects with a name pose_XXX, where XXX is the pose name.
	Can get the offesetX,Y from the object's center of rotation.
	Can still use GIMP, by linking pngs and exporting the pngs from GIMP.

RevealStageView
	Age Of Empires style outline of actors hidden behind buildings.
	Render all buildings and movables in one pass as a normal IsometricStageView (ordered based on Actor's Y position)
		Render all movables to an off-screen buffer using their outline images. (Tagged "REVEAL")
		Render all buildings to an off-screen buffer using just their masks (Tagged "HIDES")
		Combine the two using logical AND
		Render the result to the window.
	Note. when rendering the outlines, it would be nice to do this is two stages, one for a white outline,
	and again for a coloured thinner image coloured based on who's side the character belongs to.
	Rather than have multiple overlapping views, have one compound view, so that we only need to scroll the compound view.
FogOfWarStageView
	Filter which objects to render based on their proximity to friendly units.
UncharteredStageView
	Draw the scenery to off-screen buffer
	Draw white blobs on revealed places
	Merge using logical AND

Much Later
==========


StageConstraint

New Game Wizard
	Choice of a completely blank project, or a "Hello World"
	Hello World will have a font, a Play director and a Splash director
		Splash will display some simple text and a button to lauch "level01"
		Maybe also have a "Me" Role

